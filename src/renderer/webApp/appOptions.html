<!DOCTYPE html>
<html lang="en">

<head>  
  <link rel="stylesheet" href="webApp.css">     
  <link rel="icon" type="image/x-icon" href="../renderer/assets/images/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="../renderer/assets/images/favicon.png">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <title>Options</title> 
</head>

<body onload='initialize()'>
  <section class="button-container">

    <!-- First row -->
    <div class="button-row two-items">
      <input type=image id="appPlaylistData" name="appPlaylistData" src='../renderer/assets/images/app data.png' onclick="PrepMessage('data')">      
      <input type=image id="QRCode" name="QRCode" src='../renderer/assets/images/app qrcode.png' onclick="location.href='/appQRCode';">      
    </div>

    <!-- Second row -->
    <div class="button-row two-items">
      <input type=image id="refresh" name="refresh" src='../renderer/assets/images/app refresh.png'  onclick="PrepMessage('refresh')">
      <input type=image id="HiddenImages" name="HiddenImages" src='../renderer/assets/images/app unhide.png' >    
    </div>

    <!-- Third row -->
    <div class="button-row two-items">
      <input type=image id="editExif" name="editExif" src='app exif data.png' onclick="location.href='/appItemMetaData';">
      <input type=image id="appPlaylistSettings" name="appPlaylistSettings" src='../renderer/assets/images/app settings.png' onclick="location.href='/appPlaylistSettings';">    
    </div>

    <!-- Fourth row -->
    <div class="button-row two-items">
      <input type=image id="appPlaylists" name="appPlaylists" src='../renderer/assets/images/app new.png' onclick="location.href='/appPlaylists';">
      <input type=image id="MarkedFiles" name="MarkedFiles" src='../renderer/assets/images/app notifications.png'  onclick="location.href='/appMarkedFiles';">    
    </div>
    
    <!-- Fifth row -->
     <div class="button-row">
      <input type=image id="home" name="home" src='home.png' onclick="location.href='/';">
    </div>
  
  </section>


<script type='text/javascript' src='appServer.js'></script>
<script src="../../common/customAlert.js"></script> 
<script>

let hideImagesState = 0; // 1 = hide, 0 = show

  async function initialize() {
    await PrepMessage('GethideImagesState');
    
  } 

  document.getElementById('HiddenImages').addEventListener('click', function() {
  hideImagesState = hideImagesState === 1 ? 0 : 1;
  if (hideImagesState == 1) { // hidestate true / false
    this.src = 'app hide.png'; // hide true
  } else {
    this.src = 'app unhide.png';
  }
  PrepMessage('appSetHideShowImages');
});


  async function PrepMessage(payload){   
    let messagePayload = null;
    switch (payload){
      case 'GethideImagesState':
        messagePayload = {command:"GethideImagesState", data:""};
      break;  
      case 'appSetHideShowImages':      
        messagePayload = {command:"appSetHideShowImages", data:hideImagesState}; 
      break;
      case 'refresh':      
        messagePayload = {command:"refresh", data:""};               
      break; 
      case 'data':
        messagePayload = {command:"information", data:"data"};    
      break;
    }  
    try {
      // Await the response from the new, async makeRequest function.
      const returnData = await makeRequest('/app_sendrequest', messagePayload);
      command = returnData.command;
      data = returnData.data;
      // Handle the response based on the command.
      switch(messagePayload.command){
        case 'GethideImagesState':          
          hideImagesState = parseInt(data,10);             
          if (hideImagesState){               
            document.getElementById('HiddenImages').setAttribute('src', 'app hide.png');             
          }else{
            document.getElementById('HiddenImages').setAttribute('src', 'app unhide.png');             
          }
        break;

        default:          
        break;
      }      
    } catch (error) {      
      //ShowAlert('Error in html POST. '+ error, false).then((result) => {  })    
    }
  }


</script>
</body>  
</html>
