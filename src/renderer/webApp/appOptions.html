<!DOCTYPE html>
<html>

<head>
  <style>
  body {
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    min-height: 100vh;
    background-color: white;
  }

  .bottom-container {
    width: 80vw;               /* Fill 80% of screen width */
    height: 80vh;              /* Fill 90% of screen height */
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    align-items: center;
    padding: 2vh 0;
    margin-bottom: 15vh;  /* responsive bottom margin */
    box-sizing: border-box;
  }

  .button-row {
    display: flex;
    justify-content: center;
    gap: 5vw;    
    width: 100%;
    align-items: center;
  }

  .button-row input[type="image"] {
    height: 80px;
    width: 80px;       /* fixed width same as height */
    object-fit: contain;
    flex-shrink: 0;
  }

  .two-items {
    gap: 20vw; /* More horizontal space between 2 buttons */
    margin-top: 2vh; /* Extra vertical spacing above */
    margin-bottom: 2vh; /* Extra spacing below */
  }
  </style>
  <link rel="icon" type="image/x-icon" href="../renderer/assets/images/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
</head>

<body onload='initialize()'>
   <div class="bottom-container">
    <!-- First row -->
    <div class="button-row two-items">
      <input type=image id="appPlaylistData" name="appPlaylistData" src='../renderer/assets/images/app data.png' onclick="PrepMessage('data')">      
      <input type=image id="QRCode" name="QRCode" src='../renderer/assets/images/app qrcode.png' style="height:80px" onclick="location.href='/appQRCode';">      
    </div>

    <!-- Second row -->
    <div class="button-row two-items">
      <input type=image id="refresh" name="refresh" src='../renderer/assets/images/app refresh.png' style="height:80px" onclick="PrepMessage('refresh')">
      <input type=image id="HiddenImages" name="HiddenImages" src='../renderer/assets/images/app unhide.png' style="height:80px">    
    </div>

    <!-- Third row -->
    <div class="button-row two-items">
      <input type=image id="editExif" name="editExif" src='app exif data.png' style="height:80px" onclick="location.href='/appItemMetaData';">
      <input type=image id="appPlaylistSettings" name="appPlaylistSettings" src='../renderer/assets/images/app settings.png' style="height:80px" onclick="location.href='/appPlaylistSettings';">    
    </div>

    <!-- Fourth row -->
    <div class="button-row two-items">
      <input type=image id="appPlaylists" name="appPlaylists" src='../renderer/assets/images/app new.png' style="height:80px" onclick="location.href='/appPlaylists';">
      <input type=image id="MarkedFiles" name="MarkedFiles" src='../renderer/assets/images/app notifications.png' style="height:80px" onclick="location.href='/appMarkedFiles';">    
    </div>
    
    <!-- Fifth row -->
     <div class="button-row"></div>
      <input type=image id="home" name="home" src='home.png' style="height:80px" onclick="location.href='/';">
    </div>
  </div>

</body>  
<script type='text/javascript' src='appServer.js'></script>
<script src="../../common/customAlert.js"></script> 
<script>

let hideImagesState = 0; // 1 = hide, 0 = show

  async function initialize() {
    await PrepMessage('GethideImagesState');
    
  } 

  document.getElementById('HiddenImages').addEventListener('click', function() {
  hideImagesState = hideImagesState === 1 ? 0 : 1;
  if (hideImagesState == 1) { // hidestate true / false
    this.src = 'app hide.png'; // hide true
  } else {
    this.src = 'app unhide.png';
  }
  PrepMessage('appSetHideShowImages');
});


  async function PrepMessage(payload){   
    let messagePayload = null;
    switch (payload){
      case 'GethideImagesState':
        messagePayload = {command:"GethideImagesState", data:""};
      break;  
      case 'appSetHideShowImages':      
        messagePayload = {command:"appSetHideShowImages", data:hideImagesState}; 
      break;
      case 'refresh':      
        messagePayload = {command:"refresh", data:""};               
      break; 
      case 'data':
        messagePayload = {command:"information", data:"data"};    
      break;
    }  
    try {
      // Await the response from the new, async makeRequest function.
      const returnData = await makeRequest('/app_sendrequest', messagePayload);
      command = returnData.command;
      data = returnData.data;
      // Handle the response based on the command.
      switch(messagePayload.command){
        case 'GethideImagesState':          
          hideImagesState = parseInt(data,10);             
          if (hideImagesState){               
            document.getElementById('HiddenImages').setAttribute('src', 'app hide.png');             
          }else{
            document.getElementById('HiddenImages').setAttribute('src', 'app unhide.png');             
          }
        break;

        default:          
        break;
      }      
    } catch (error) {      
      //ShowAlert('Error in html POST. '+ error, false).then((result) => {  })    
    }
  }


</script>

</html>
